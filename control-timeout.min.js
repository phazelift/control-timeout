"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(function(){var e,c,i;i=require("types.js"),c="control-timeout",e=function(){var e=function(){function l(e){_classCallCheck(this,l),this.timeouts={},this.running={},this.delay=Math.abs(e)||l.delay}return _createClass(l,null,[{key:"setLog",value:function(e){return l.log=i.forceFunction(e)}}]),_createClass(l,[{key:"exists",value:function(e){return this.timeouts.hasOwnProperty(e)}},{key:"isRunning",value:function(e){return this.running.hasOwnProperty(e)}},{key:"_stopOne",value:function(e){return this.isRunning(e)&&(clearTimeout(this.running[e]),delete this.running[e]),this}},{key:"stop",value:function(){for(var e,t,n,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];if(s.length)for(e=0,n=s.length;e<n;e++)t=s[e],this._stopOne(t);else for(t in this.running)this._stopOne(t);return this}},{key:"setDelay",value:function(e,t){if(this.exists(e))return this.timeouts[e].delay=i.forceNumber(t,this.timeouts[e].delay)}},{key:"getTimeout",value:function(e){return this.running[e]}},{key:"_setTimeout",value:function(e,t,n){var i=this;return this.running[e]=setTimeout(function(){return delete i.running[e],t()},n)}},{key:"run",value:function(e){var t,n,i;i=[];for(var s=arguments.length,o=new Array(1<s?s-1:0),r=1;r<s;r++)o[r-1]=arguments[r];if(e)if(this.exists(e)){var u;i.push(this._setTimeout(e,(u=this.timeouts[e].action).bind.apply(u,[null].concat(o)),this.timeouts[e].delay))}else l.log(c+': timeout with id: "'+e+'" was not found');else for(e in t=this.timeouts){var a;if(n=t[e],!this.isRunning(e))i.push(this._setTimeout(e,(a=n.action).bind.apply(a,[null].concat(o)),n.delay))}switch(i.length){case 0:return null;case 1:return i[0];default:return i}}},{key:"removeAll",value:function(){return this.stop(),this.timeouts={},this}},{key:"remove",value:function(){for(var e,t,n,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];if(s.length)for(e=0,n=s.length;e<n;e++)t=s[e],this._stopOne(t),delete this.timeouts[t];else l.log(c+": cannot remove, invalid or non-existing timeout!");return this}},{key:"_add",value:function(e,t,n){return i.notString(e)||!e.length?l.log(c+": cannot add timeout, invalid or missing id!"):this.exists(e)?l.log(c+": cannot add timeout, id: "+e+" exists already!"):this.timeouts[e]={action:i.forceFunction(t),delay:Math.abs(i.forceNumber(n,this.delay))},this}},{key:"add",value:function(e,t,n){return i.isObject(e)?this._add(e.id,e.action,e.delay):this._add(e,t,n)}}]),l}();return e.log=e.setLog("undefined"!=typeof console&&null!==console?console.log:void 0),e.delay=0,e}.call(this),module.exports=e}).call(void 0);