"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function(){var e,t,n;n=require("types.js"),t="control-timeout",e=function(){var e=function(){function e(t){_classCallCheck(this,e),this.timeouts={},this.running={},this.delay=Math.abs(t)||e.delay}return _createClass(e,null,[{key:"setLog",value:function(t){return e.log=n.forceFunction(t)}}]),_createClass(e,[{key:"exists",value:function(e){return this.timeouts.hasOwnProperty(e)}},{key:"isRunning",value:function(e){return this.running.hasOwnProperty(e)}},{key:"_stopOne",value:function(e){return this.isRunning(e)&&(clearTimeout(this.running[e]),delete this.running[e]),this}},{key:"stop",value:function(){for(var e,t,n,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];if(o.length)for(e=0,n=o.length;e<n;e++)t=o[e],this._stopOne(t);else for(t in this.running)this._stopOne(t);return this}},{key:"setDelay",value:function(e,t){if(this.exists(e))return this.timeouts[e].delay=n.forceNumber(t,this.timeouts[e].delay)}},{key:"getTimeout",value:function(e){return this.running[e]}},{key:"_setTimeout",value:function(e,t,n){var i=this;return this.running[e]=setTimeout((function(){return delete i.running[e],t()}),n)}},{key:"run",value:function(n){var i,o,r;r=[];for(var s=arguments.length,u=new Array(s>1?s-1:0),a=1;a<s;a++)u[a-1]=arguments[a];if(n)if(this.exists(n)){var l;r.push(this._setTimeout(n,(l=this.timeouts[n].action).bind.apply(l,[null].concat(u)),this.timeouts[n].delay))}else e.log(t+': timeout with id: "'+n+'" was not found');else for(n in i=this.timeouts){var c;if(o=i[n],!this.isRunning(n))r.push(this._setTimeout(n,(c=o.action).bind.apply(c,[null].concat(u)),o.delay))}switch(r.length){case 0:return null;case 1:return r[0];default:return r}}},{key:"removeAll",value:function(){return this.stop(),this.timeouts={},this}},{key:"remove",value:function(){for(var n,i,o,r=arguments.length,s=new Array(r),u=0;u<r;u++)s[u]=arguments[u];if(s.length)for(n=0,o=s.length;n<o;n++)i=s[n],this._stopOne(i),delete this.timeouts[i];else e.log(t+": cannot remove, invalid or non-existing timeout!");return this}},{key:"_add",value:function(i,o,r){return n.notString(i)||!i.length?e.log(t+": cannot add timeout, invalid or missing id!"):this.exists(i)?e.log(t+": cannot add timeout, id: "+i+" exists already!"):this.timeouts[i]={action:n.forceFunction(o),delay:Math.abs(n.forceNumber(r,this.delay))},this}},{key:"add",value:function(e,t,i){return n.isObject(e)?this._add(e.id,e.action,e.delay):this._add(e,t,i)}}]),e}();return e.log=e.setLog("undefined"!=typeof console&&null!==console?console.log:void 0),e.delay=0,e}.call(this),module.exports=e}).call(void 0);