(function(){var t,n,e=[].slice;n=require("types.js"),t=function(){function t(n){this.timeout={},this.running={},this.delay=Math.abs(n)||t.delay}return t.log=n.forceFunction("undefined"!=typeof console&&null!==console?console.log:void 0),t.delay=0,t.prototype.exists=function(t){return this.timeout.hasOwnProperty(t)},t.prototype.isRunning=function(t){return this.running.hasOwnProperty(t)},t.prototype.stopOne=function(t){return(t=n.forceString(t))&&this.isRunning(t)&&(clearTimeout(this.running[t]),delete this.running[t]),this},t.prototype.stop=function(){var t,n,i,o;if(i=1<=arguments.length?e.call(arguments,0):[],i.length)for(t=0,o=i.length;o>t;t++)n=i[t],this.stopOne(n);else for(n in this.running)this.stopOne(n);return this},t.prototype.setDelay=function(t,e){return this.exists(t)?this.timeout[t].delay=n.forceNumber(e,this.timeout[t].delay):void 0},t.prototype.setTimeout=function(t,n,e){return this.running[t]=setTimeout(function(e){return function(){return delete e.running[t],n()}}(this),e),this},t.prototype.run=function(){var t,i,o,s,r,u;if(i=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],n.isString(i)&&this.exists(i)&&!this.isRunning(i))this.setTimeout(i,(o=this.timeout[i].action).bind.apply(o,[this].concat(e.call(t))),this.timeout[i].delay);else{s=this.timeout;for(i in s)u=s[i],this.isRunning(i)||this.setTimeout(i,(r=u.action).bind.apply(r,[this].concat(e.call(t))),u.delay)}return this},t.prototype.removeAll=function(){return this.stop(),this.timeout={},this},t.prototype.remove=function(){var n,i,o,s;if(o=1<=arguments.length?e.call(arguments,0):[],o.length)for(n=0,s=o.length;s>n;n++)i=o[n],this.stopOne(i),delete this.timeout[i];else t.log("cannot remove invalid or non-existing timeout!");return this},t.prototype.add=function(e,i,o){var s,r;return s=n.forceObject(e),n.forceString(e,s.id)?(r={action:n.forceFunction(i,s.action),delay:Math.abs(n.forceNumber(o,0)||n.forceNumber(s.delay,this.delay))},e=n.forceString(e)||s.id,this.exists(e)?t.log("cannot add timeout, id: "+e+" exists already!"):this.timeout[e]=r,this):(t.log("cannot add timeout, invalid or missing arguments!"),this)},t}(),module.exports=t}).call(this);